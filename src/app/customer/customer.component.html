<div class="work-area" *ngIf="selectedCustomer==undefined">
  <div class="card">
    <div class="card-header bg-gray-gradient">
      <div class="d-flex align-items-center">
        <div class="flex-grow-1">
          <img src="../../assets/images/customers.png" width="30px" alt="" class="float-left mr-2">
          <h5 class="card-title float-left mr-2">Müşteriler</h5>
        </div>
        <div class="head-filter mr-1">
          <div class="input-group input-group-round">
            <div class="input-group-prepend">
                          <span class="input-group-text">
                              <i class="fa fa-filter"></i>
                          </span>
            </div>
            <input type="search" class="form-control filter-list-input" placeholder="Müşteri Ara.." [(ngModel)]="searchText">
          </div>
        </div>
        <div class="head-filter">
          <button type="button" class="btn btn-light input-button" (click)="btnNew_Click()">
            <i class="fa fa-plus text-secondary"></i> Yeni Müşteri Oluştur
          </button>
        </div>
        <div class="head-filter">
          <div class="dropdown">
            <button type="button" class="btn btn-light input-dropdown dropdown-toggle" data-toggle="dropdown">
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item cursor-pointer" (click)="btnShowMainFiler_Click()">Geniş Filtre</a>
              <a class="dropdown-item cursor-pointer" (click)="btnExportToExcel_Click()">Excel'e Aktar</a>
              <a class="dropdown-item cursor-pointer" (click)="btnExcelImport_Click()">Müşteri Aktar</a>
              <a class="dropdown-item cursor-pointer" (click)="btnFix_Click()" hidden>Fix</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="mainList != undefined; else elseBlock2">
      <div *ngIf="mainList.length > 0; else elseBlock">
        <div class="main-list">
          <div class="main-list-item bg-body">
            <div class="icon-empty">
              
            </div>
            <div class="content">
              <div class="row-2">
                <div class="w-50 float-left font-weight-600">ÜNVANI</div>
                <div class="w-25 float-left font-weight-600">ÖDEME TİPİ</div>
                <div class="w-25 float-left font-weight-600">VADE</div>
              </div>
            </div>
          </div>
          <div class="main-list-item cursor-pointer" title="Kayıt Göster" (click)="showSelectedCustomer(item)"
          *ngFor="let item of mainList | filterDataCustomer: searchText; index as i;">
            <div class="icon">
              <i class="fas fa-file-alt fa-2x text-danger"></i>
            </div>
            <div class="content">
              <div class="row-1">
                <div class="w-100">
                  <span class="text-red font-weight-600 mr-1">{{item.data.code}}</span>
                  <span class="font-weight-600">{{item.data.name}}</span>
                  <small class="font-weight-600">-{{item.data.owner}}</small>
                </div>
              </div>
              <div class="row-2">
                <div class="w-50 float-left">
                  <span class="badge badge-warning">{{item.customerTypeTr}}</span>
                </div>
                <div class="w-25 float-left">{{item.paymentTypeTr}}</div>
                <div class="w-25 float-left">{{item.termTr}}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <ng-template #elseBlock>
        <div class="card bg-red text-white m-3">
          <div class="card-body">Görüntülenecek veri bulunamadı.</div>
        </div>
      </ng-template>
    </div>
    <ng-template #elseBlock2>
      <div class="card">
        <div class="card-body">
          <div class="loader"></div>
        </div>
      </div>
    </ng-template>
  </div>
</div>
<div class="card work-area" *ngIf="selectedCustomer!=undefined">

  <div class="card-header bg-gray-gradient">
    <div class="d-flex align-items-center">
      <div class="flex-grow-1">
        <img src="../../assets/images/customers.png" width="30px" alt="" class="float-left mr-2">
        <h5 class="card-title float-left mr-2">Müşteri > 
          <span *ngIf="!selectedCustomer.data.primaryKey">Yeni Kayıt</span>
          <span *ngIf="selectedCustomer.data.primaryKey">Görüntüleme</span>
        </h5>
      </div>
      <div class="head-filter">
        <button type="button" class="btn btn-light input-button" (click)="btnReturnList_Click()" *ngIf="openedPanel=='dashboard'">
          <i class="fa fa-arrow-left text-secondary"></i> Listeye Geri Dön
        </button>
        <button type="button" class="btn btn-light input-button" (click)="btnOpenSubPanel_Click('dashboard')" *ngIf="openedPanel!='dashboard'">
          <i class="fa fa-arrow-left text-secondary"></i> Ana Ekrana Geri Dön
        </button>
      </div>
      <div class="head-filter">
        <div class="dropdown">
          <button type="button" class="btn btn-light input-dropdown dropdown-toggle" data-toggle="dropdown">
          </button>
          <div class="dropdown-menu">
            <a class="dropdown-item cursor-pointer" (click)="btnAccountSummaryExportToExcel_Click()" 
              *ngIf="openedPanel=='accountSummary'"><i class="fas fa-file-excel text-secondary"></i> Excel'e Aktar
            </a>
            <a class="dropdown-item cursor-pointer" (click)="btnFileUpload_Click()" *ngIf="selectedCustomer.data.primaryKey!=undefined">
              <i class="fa fa-upload text-secondary"></i> Dosya Yükle
            </a>
            <a class="dropdown-item cursor-pointer" (click)="btnShowJsonData_Click()"><i class="fa fa-jsfiddle text-secondary"></i> Json Göster</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='dashboard'">
    <div class="card-body" *ngIf="selectedCustomer.data.primaryKey!=undefined">
      <div class="row">
        <div class="col-sm-6">
          <div class="row">
            <div class="cursor-pointer mb-1 col-sm-6" (click)="btnOpenSubPanel_Click('edit')">
              <div class="border p-2 bg-light" style="border-radius: 0 25px 25px 0">
                <img src="../../assets/images/customer-edit.png" width="50px" class="float-left mr-3" alt="">
                <div>Düzenleme</div>
                <small class="text-secondary">Müşteri Bilgilerini Düzenleyin</small>
              </div>
            </div>
            <div class="cursor-pointer mb-1 col-sm-6" (click)="btnOpenSubPanel_Click('accountSummary')">
              <div class="border p-2 bg-light" style="border-radius: 0 25px 25px 0">
                <img src="../../assets/images/customer-account-balance.png" width="50px" class="float-left mr-3" alt="">
                <div>Hesap Bakiye</div>
                <small class="text-secondary">Müşteriye Ait Tüm Hareketleri Listeler</small>
              </div>
            </div>
            <div class="cursor-pointer mb-1 col-sm-6" (click)="btnOpenSubPanel_Click('fileUpload')">
              <div class="border p-2 bg-light" style="border-radius: 0 25px 25px 0">
                <img src="../../assets/images/customer-file-upload.png" width="50px" class="float-left mr-3" alt="">
                <div>Yüklenen Dosyalar</div>
                <small class="text-secondary">Müşteriye Ait Tüm Dosyaları Listeler</small>
              </div>
            </div>
            <div class="cursor-pointer mb-1 col-sm-6" (click)="btnOpenSubPanel_Click('visit')">
              <div class="border p-2 bg-light" style="border-radius: 0 25px 25px 0">
                <img src="../../assets/images/customer-visit.png" width="50px" class="float-left mr-3" alt="">
                <div>Ziyaretler</div>
                <small class="text-secondary">Müşteriye Ait Planlı Ziyaretleri Listeler</small>
              </div>
            </div>
            <div class="cursor-pointer mb-1 col-sm-6" (click)="btnOpenSubPanel_Click('target')">
              <div class="border p-2 bg-light" style="border-radius: 0 25px 25px 0">
                <img src="../../assets/images/customer-target.png" width="50px" class="float-left mr-3" alt="">
                <div>Hedefler</div>
                <small class="text-secondary">Müşteriye Ait Hedefleri Listeler</small>
              </div>
            </div>
            <div class="cursor-pointer mb-1 col-sm-6" (click)="btnOpenSubPanel_Click('mail')">
              <div class="border p-2 bg-light" style="border-radius: 0 25px 25px 0">
                <img src="../../assets/images/customer-mail.png" width="50px" class="float-left mr-3" alt="">
                <div>Mailler</div>
                <small class="text-secondary">Müşteriye Gönderilen Mailleri Listeler</small>
              </div>
            </div>
            <div class="cursor-pointer mb-1 col-sm-6" (click)="btnOpenSubPanel_Click('delivery-address')">
              <div class="border p-2 bg-light" style="border-radius: 0 25px 25px 0">
                <img src="../../assets/images/delivery-address.png" width="50px" class="float-left mr-3" alt="">
                <div>Sevk Adresleri</div>
                <small class="text-secondary">Müşteri Sevk Adreslerini Listeler</small>
              </div>
            </div>
          </div>                      
          <div class="card mt-2">
            <div class="card-body">
              <div class="loader-small " *ngIf="purchaseInvoiceList == undefined"></div>
              <canvas id="buyingChart"></canvas>
            </div>
          </div>                      
          <div class="card mt-2">
            <div class="card-body">
              <div class="loader-small " *ngIf="salesInvoiceList == undefined"></div>
              <canvas id="sellingChart"></canvas>
            </div>

          </div>
        </div>
        <div class="col-sm-6">
          <div id="panel-navigator">
            <div class="row mb-2">
              <div class="col-sm-12">
                <div class="list-group">
                  <div class="list-group-item fs-14">
                    <div class="row">
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Müşteri Adı</div>
                      <div class="col-sm-9 text-secondary mb-1">{{selectedCustomer.data.name}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Müşteri Tipi</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.customerTypeTr}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Yetkili Kişi</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.data.owner}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">E-Mail</div>
                      <div class="col-sm-9 text-secondary mb-1">{{selectedCustomer.data.email}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Telefon</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.data.phone1}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Fax</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.data.phone2}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Vergi Dairesi</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.data.taxOffice}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Vergi Numarası</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.data.taxNumber}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Ödeme Tipi</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.paymentTypeTr}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Vade</div>
                      <div class="col-sm-3 text-secondary mb-1">{{selectedCustomer.termTr}}</div>
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Temsilci</div>
                      <div class="col-sm-3 text-secondary mb-1" *ngIf="selectedCustomer.executive==undefined">Seçilmedi
                      </div>
                      <div class="col-sm-3 text-secondary mb-1"
                           *ngIf="selectedCustomer.executive!=undefined">{{selectedCustomer.executive.longName}}</div>
                    </div>
                    <div class="row">
                      <div class="col-sm-3 font-weight-600 text-dark-blue mb-1">Adres</div>
                      <div class="col-sm-9 text-secondary mb-1">{{selectedCustomer.data.address}}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-6">
                <div class="card card-stats">
                  <div class="card-header card-header-warning card-header-icon">
                    <div class="card-icon">
                      <img src="../../assets/images/sales_invoice.png" width="30px">
                    </div>
                    <p class="card-category">Satış Faturası</p>
                    <h5 class="card-title">{{siAmount | currency:'₺'}}</h5>
                  </div>
                  <div class="card-footer">
                    <div  class="stats text-center">
                      <a class="float-right text-button" (click)="btnOpenSubPanel_Click('salesInvoice')">Detay
                        >></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6">
                <div class="card card-stats">
                  <div class="card-header card-header-danger card-header-icon">
                    <div class="card-icon">
                      <img src="../../assets/images/collection.png" width="30px">
                    </div>
                    <p class="card-category">Tahsilat</p>
                    <h5 class="card-title">{{colAmount | currency:'₺'}}</h5>
                  </div>
                  <div class="card-footer">
                    <div  class="stats text-center">
                      <a class="float-right text-button" (click)="btnOpenSubPanel_Click('collection')">Yeni Kayıt >></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 mt-1">
                <div class="card card-stats">
                  <div class="card-header card-header-success card-header-icon">
                    <div class="card-icon">
                      <img src="../../assets/images/purchase_invoice.png" width="30px">
                    </div>
                    <p class="card-category">Alım Faturası</p>
                    <h5 class="card-title">{{purchaseInvoiceAmount | currency:'₺'}}</h5>
                  </div>
                  <div class="card-footer">
                    <div  class="stats text-center">
                      <a class="float-right text-button" (click)="btnOpenSubPanel_Click('purchaseInvoice')">Detay
                        >></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 mt-1">
                <div class="card card-stats">
                  <div class="card-header card-header-info card-header-icon">
                    <div class="card-icon">
                      <img src="../../assets/images/payment.png" width="30px">
                    </div>
                    <p class="card-category">Ödeme</p>
                    <h5 class="card-title">{{payAmount | currency:'₺'}}</h5>
                  </div>
                  <div class="card-footer">
                    <div  class="stats text-center">
                      <a class="float-right text-button" (click)="btnOpenSubPanel_Click('payment')">Yeni Kayıt >></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 mt-1">
                <div class="card card-stats">
                  <div class="card-header card-header-warning card-header-icon">
                    <div class="card-icon">
                      <img src="../../assets/images/account_voucher.png" width="30px">
                    </div>
                    <p class="card-category">Cari Fiş</p>
                    <h5 class="card-title">{{voucherAmount | currency:'₺'}}</h5>
                  </div>
                  <div class="card-footer">
                    <div  class="stats text-center">
                      <a class="float-right text-button" (click)="btnOpenSubPanel_Click('accountVoucher')">Yeni Kayıt
                        >></a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 mt-1">
                <div class="card card-stats">
                  <div class="card-header card-header-danger card-header-icon">
                    <div class="card-icon">
                      <img src="../../assets/images/cash-desks.png" width="30px">
                    </div>
                    <p class="card-category">Toplam</p>
                    <h5 class="card-title">{{totalAmount | currency:'₺'}}</h5>
                  </div>
                  <div class="card-footer">
                    <div  class="stats text-center">
                      Toplam bakiye bilgisi
                      <span class="ml-1" *ngIf="totalAmount>0">(Alacaklı)</span>
                      <span class="ml-1" *ngIf="totalAmount<0">(Borçlu)</span>
                      <span class="ml-1" *ngIf="totalAmount==0">(Bakiye Yok)</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='salesInvoice'">
    <div class="card-body">
      <div class="form-row">
        <div class="col-sm-5">
          <div class="card bg-light">
            <div class="card-header bg-secondary text-light">
              <h6 class="float-left">Önceki Satış Faturaları</h6>
              <span class="font-weight-bold float-right">{{siAmount | currency:'₺'}}</span>
            </div>
            <div class="card-body work-area-2" *ngIf="transactionList$ | async; let transactionList; else elseBlock">
              <div class="list-group">
                <div class="list-group-item bg-red text-light main-list-item">
                  <div class="row">
                    <div class="col-sm-6">Fiş No</div>
                    <div class="col-sm-3"><span class="float-right">Tutar</span></div>
                    <div class="col-sm-3"><span class="float-right">Tarih</span></div>
                  </div>
                </div>
                <div class="list-group-item list-group-item-action main-list-item cursor-pointer"
                     (click)="showTransactionRecord(item)"
                     *ngFor="let item of transactionList;">
                  <div class="row">
                    <div class="col-sm-6">
                      <i class="far fa-arrow-alt-circle-right mr-2 text-red"></i>
                      <span class="text-red">{{item.receiptNo}}</span>
                    </div>
                    <div class="col-sm-3"><span class="float-right">{{item.amount | currency:'₺'}}</span></div>
                    <div class="col-sm-3"><span class="float-right">{{item.insertDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                  </div>
                </div>
                <ng-template #elseBlock>
                  <div class="card bg-red text-white">
                    <div class="card-body">Görüntülenecek veri bulunamadı.</div>
                  </div>
                </ng-template>
              </div>
            </div>
            <ng-template #elseBlock>
              <div class="card bg-red text-white">
                <div class="card-body">Görüntülenecek veri bulunamadı.</div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='collection'">
    <div class="card-body">
      <div class="form-row">
        <div class="col-sm-7">
          <div class="card">
            <div class="card-header bg-gray-gradient text-dark">
              <h6>Yeni Tahsilat Girişi</h6>
            </div>
            <div class="card-body">
              <form (ngSubmit)="btnSaveCollection_Click()" class="was-validated" #fc="ngForm">
                <div class="form-row">
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="accountPrimaryKey">Hesap</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" name="accountPrimaryKey" required
                            [(ngModel)]="newCollection.data.accountPrimaryKey">
                      <option value={{item.primaryKey}}
                              *ngFor="let item of accountList$ | async; index as i;">{{item.name}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen hesap seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="type">Tahsilat Tipi</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" name="type" required
                            [(ngModel)]="newCollection.data.type">
                      <option value={{item.primaryKey}} *ngFor="let item of paymentList">{{item.custom1}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen tip seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="cashDeskPrimaryKey">Kasa</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" name="cashDeskPrimaryKey"
                            required
                            [(ngModel)]="newCollection.data.cashDeskPrimaryKey">
                      <option value={{item.primaryKey}} *ngFor="let item of cashDeskList$ | async; index as i;">{{item.name}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen kasa seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="receiptNo">Fiş Numarası</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" name="receiptNo" type="text"
                           [(ngModel)]="newCollection.data.receiptNo" required>
                    <div class="invalid-feedback invalid-input-info">Lütfen alanı doldurunuz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left">Kayıt Tarihi</label>
                  </div>
                  <div class="col-sm-6">
                    <div class="input-group">
                      <input class="form-control form-control-sm" placeholder="yyyy-mm-dd" name="d3" #c3="ngModel"
                             [(ngModel)]="recordDate" ngbDatepicker #d3="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-sm btn-outline-secondary" (click)="d3.toggle()" type="button"><i
                          class="fa fa-calendar"></i></button>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="totalPrice">Tutar</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" name="amount" type="text"
                           (focus)="focus_amount()"
                           (blur)="format_amount($event)"
                           [(ngModel)]="newCollection.amountFormatted">
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="description">Açıklama</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" name="description" type="text"
                           [(ngModel)]="newCollection.data.description">
                  </div>
                </div>
              </form>
            </div>
            <div class="card-footer">
              <div class="btn-action float-right">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text success-icon-side">
                      <i class="fa fa-check" *ngIf="!onTransaction"></i>
                      <i class="fa fa-spinner fa-spin" *ngIf="onTransaction"></i>
                    </span>
                  </div>
                  <button type="button" class="btn btn-sm btn-success form-control"
                          [disabled]="onTransaction"
                          (click)="btnSaveCollection_Click()">Kaydet
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-5">
          <div class="card bg-light">
            <div class="card-header bg-gray-gradient text-dark">
              <h6 class="float-left">Önceki Tahsilatlar</h6>
              <span class="font-weight-bold float-right">{{colAmount | currency:'₺'}}</span>
            </div>
            <div class="card-body work-area-2" *ngIf="transactionList$ | async; let transactionList; else elseBlock">
              <div class="list-group">
                <div class="list-group-item bg-red text-light main-list-item">
                  <div class="row">
                    <div class="col-sm-6">Fiş No</div>
                    <div class="col-sm-3"><span class="float-right">Tutar</span></div>
                    <div class="col-sm-3"><span class="float-right">Tarih</span></div>
                  </div>
                </div>
                <div class="list-group-item list-group-item-action main-list-item cursor-pointer"
                     (click)="showTransactionRecord(item)"
                     *ngFor="let item of transactionList;">
                  <div class="row">
                    <div class="col-sm-6">
                      <i class="far fa-arrow-alt-circle-right mr-2 text-red"></i>
                      <span class="text-red">{{item.receiptNo}}</span>
                    </div>
                    <div class="col-sm-3"><span class="float-right">{{item.amount | currency:'₺'}}</span></div>
                    <div class="col-sm-3"><span class="float-right">{{item.insertDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <ng-template #elseBlock>
              <div class="card bg-red text-white">
                <div class="card-body">Görüntülenecek veri bulunamadı.</div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='purchaseInvoice'">
    <div class="card-body">
      <div class="form-row">
        <div class="col-sm-5">
          <div class="card bg-light">
            <div class="card-header bg-secondary text-light">
              <h6 class="float-left">Önceki Alım Faturaları</h6>
              <span class="font-weight-bold float-right">{{purchaseInvoiceAmount | currency:'₺'}}</span>
            </div>
            <div class="card-body work-area-2" *ngIf="transactionList$ | async; let transactionList; else elseBlock">
              <div class="list-group">
                <div class="list-group-item bg-red text-light main-list-item">
                  <div class="row">
                    <div class="col-sm-6">Fiş No</div>
                    <div class="col-sm-3"><span class="float-right">Tutar</span></div>
                    <div class="col-sm-3"><span class="float-right">Tarih</span></div>
                  </div>
                </div>
                <div class="list-group-item list-group-item-action main-list-item cursor-pointer"
                     (click)="showTransactionRecord(item)"
                     *ngFor="let item of transactionList;">
                  <div class="row">
                    <div class="col-sm-6">
                      <i class="far fa-arrow-alt-circle-right mr-2 text-red"></i>
                      <span class="text-red">{{item.receiptNo}}</span>
                    </div>
                    <div class="col-sm-3"><span class="float-right">{{item.amount | currency:'₺'}}</span></div>
                    <div class="col-sm-3"><span class="float-right">{{item.insertDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                  </div>
                </div>
                <ng-template #elseBlock>
                  <div class="card bg-red text-white">
                    <div class="card-body">Görüntülenecek veri bulunamadı.</div>
                  </div>
                </ng-template>
              </div>
            </div>
            <ng-template #elseBlock>
              <div class="card bg-red text-white">
                <div class="card-body">Görüntülenecek veri bulunamadı.</div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='payment'">
    <div class="card-body">
      <div class="form-row">
        <div class="col-sm-7">
          <div class="card">
            <div class="card-header bg-secondary text-light">
              <h6>Yeni Ödeme Girişi</h6>
            </div>
            <div class="card-body">
              <form (ngSubmit)="btnSavePayment_Click()" class="was-validated" #fp="ngForm">
                <div class="form-row">
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="accountPrimaryKey">Hesap</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" name="accountPrimaryKey" required
                            [(ngModel)]="newPayment.data.accountPrimaryKey">
                      <option value={{item.primaryKey}}
                              *ngFor="let item of accountList$ | async; index as i;">{{item.name}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen hesap seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="type">Ödeme Tipi</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" id="type" name="type" required
                            [(ngModel)]="newPayment.data.type">
                      <option value={{item.primaryKey}} *ngFor="let item of paymentList">{{item.custom1}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen Tip seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="cashDeskPrimaryKey">Kasa</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" id="cashDeskPrimaryKey" name="cashDeskPrimaryKey"
                            required
                            [(ngModel)]="newPayment.data.cashDeskPrimaryKey">
                            <option value={{item.primaryKey}} *ngFor="let item of cashDeskList$ | async; index as i;">{{item.name}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen kasa seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="receiptNo">Fiş Numarası</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" id="receiptNo" name="receiptNo" type="text"
                           [(ngModel)]="newPayment.data.receiptNo" required>
                    <div class="invalid-feedback invalid-input-info">Lütfen alanı doldurunuz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left">Kayıt Tarihi</label>
                  </div>
                  <div class="col-sm-6">
                    <div class="input-group">
                      <input class="form-control form-control-sm" placeholder="yyyy-mm-dd" name="d3" #c3="ngModel"
                             [(ngModel)]="recordDate" ngbDatepicker #d3="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-sm btn-outline-secondary" (click)="d3.toggle()" type="button"><i
                          class="fa fa-calendar"></i></button>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="totalPrice">Tutar</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" id="amount" name="amount" type="text"
                           (focus)="focus_amount()"
                           (blur)="format_amount($event)"
                           [(ngModel)]="newPayment.amountFormatted" required>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="description">Açıklama</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" id="description" name="description" type="text"
                           [(ngModel)]="newPayment.data.description">
                  </div>
                </div>
              </form>
            </div>
            <div class="card-footer">
              <div class="btn-action float-right">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text success-icon-side">
                      <i class="fa fa-check" *ngIf="!onTransaction"></i>
                      <i class="fa fa-spinner fa-spin" *ngIf="onTransaction"></i>
                    </span>
                  </div>
                  <button type="button" class="btn btn-sm btn-success form-control"
                          [disabled]="onTransaction"
                          (click)="btnSavePayment_Click()">Kaydet
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-5">
          <div class="card bg-light">
            <div class="card-header bg-secondary text-light">
              <h6 class="float-left">Önceki Ödemeler</h6>
              <span class="font-weight-bold float-right">{{payAmount | currency:'₺'}}</span>
            </div>
            <div class="card-body work-area-2" *ngIf="transactionList$ | async; let transactionList; else elseBlock">
              <div class="list-group">
                <div class="list-group-item bg-red text-light main-list-item">
                  <div class="row">
                    <div class="col-sm-6">Fiş No</div>
                    <div class="col-sm-3"><span class="float-right">Tutar</span></div>
                    <div class="col-sm-3"><span class="float-right">Tarih</span></div>
                  </div>
                </div>
                <div class="list-group-item list-group-item-action main-list-item cursor-pointer"
                     (click)="showTransactionRecord(item)"
                     *ngFor="let item of transactionList;">
                  <div class="row">
                    <div class="col-sm-6">
                      <i class="far fa-arrow-alt-circle-right mr-2 text-red"></i>
                      <span class="text-red">{{item.receiptNo}}</span>
                    </div>
                    <div class="col-sm-3"><span class="float-right">{{item.amount | currency:'₺'}}</span></div>
                    <div class="col-sm-3"><span class="float-right">{{item.insertDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                  </div>
                </div>
                <ng-template #elseBlock>
                  <div class="card bg-red text-white">
                    <div class="card-body">Görüntülenecek veri bulunamadı.</div>
                  </div>
                </ng-template>
              </div>
            </div>
            <ng-template #elseBlock>
              <div class="card bg-red text-white">
                <div class="card-body">Görüntülenecek veri bulunamadı.</div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='accountVoucher'">
    <div class="card-body">
      <div class="form-row">
        <div class="col-sm-7">
          <div class="card">
            <div class="card-header bg-secondary text-light">
              <h6>Yeni Fiş Girişi</h6>
            </div>
            <div class="card-body">
              <form (ngSubmit)="btnSaveVoucher_Click()" class="was-validated" #v="ngForm">
                <div class="form-row">
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="accountPrimaryKey">Hesap</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" name="accountPrimaryKey" required
                            [(ngModel)]="newVoucher.data.accountPrimaryKey">
                      <option value={{item.primaryKey}}
                              *ngFor="let item of accountList$ | async; index as i;">{{item.name}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen hesap seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="type">Fiş Tipi</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" id="typeAV" name="type" required
                            [(ngModel)]="newVoucher.data.type">
                      <option value="creditVoucher">Alacaklandırma</option>
                      <option value="debitVoucher">Borçlandırma</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen tip seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="cashDeskPrimaryKey">Kasa</label>
                  </div>
                  <div class="col-sm-6">
                    <select class="form-control form-control-sm w-100" id="cashDeskPrimaryKeyAV"
                            name="cashDeskPrimaryKey"
                            required
                            [(ngModel)]="newVoucher.data.cashDeskPrimaryKey">
                            <option value={{item.primaryKey}} *ngFor="let item of cashDeskList$ | async; index as i;">{{item.name}}</option>
                    </select>
                    <div class="invalid-feedback invalid-input-info">Lütfen kasa seçiniz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="receiptNo">Fiş Numarası</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" id="receiptNoAV" name="receiptNo" type="text"
                           [(ngModel)]="newVoucher.data.receiptNo" required>
                    <div class="invalid-feedback invalid-input-info">Lütfen alanı doldurunuz.</div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left">Kayıt Tarihi</label>
                  </div>
                  <div class="col-sm-6">
                    <div class="input-group">
                      <input class="form-control form-control-sm" placeholder="yyyy-mm-dd" name="d3" #c3="ngModel"
                             [(ngModel)]="recordDate" ngbDatepicker #d3="ngbDatepicker">
                      <div class="input-group-append">
                        <button class="btn btn-sm btn-outline-secondary" (click)="d3.toggle()" type="button"><i
                          class="fa fa-calendar"></i></button>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="totalPrice">Tutar</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" id="amountAV" name="amount" type="text"
                           (focus)="focus_amount()"
                           (blur)="format_amount($event)"
                           [(ngModel)]="newVoucher.amountFormatted">
                  </div>
                  <div class="col-sm-6">
                    <label class="col-form-label float-left" for="description">Açıklama</label>
                  </div>
                  <div class="col-sm-6">
                    <input class="form-control form-control-sm w-100" id="descriptionAV" name="description" type="text"
                           [(ngModel)]="newVoucher.data.description">
                  </div>
                </div>
              </form>
            </div>
            <div class="card-footer">
              <div class="btn-action float-right">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text success-icon-side">
                      <i class="fa fa-check" *ngIf="!onTransaction"></i>
                      <i class="fa fa-spinner fa-spin" *ngIf="onTransaction"></i>
                    </span>
                  </div>
                  <button type="button" class="btn btn-sm btn-success form-control"
                          [disabled]="onTransaction"
                          (click)="btnSaveVoucher_Click()">Kaydet
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-5">
          <div class="card bg-light">
            <div class="card-header bg-secondary text-light">
              <h6 class="float-left">Önceki Fişler</h6>
              <span class="font-weight-bold float-right">{{voucherAmount | currency:'₺'}}</span>
            </div>
            <div class="card-body work-area-2" *ngIf="transactionList$ | async; let transactionList; else elseBlock">
              <div class="list-group">
                <div class="list-group-item bg-red text-light main-list-item">
                  <div class="row">
                    <div class="col-sm-6">Fiş No</div>
                    <div class="col-sm-3"><span class="float-right">Tutar</span></div>
                    <div class="col-sm-3"><span class="float-right">Tarih</span></div>
                  </div>
                </div>
                <div class="list-group-item list-group-item-action main-list-item cursor-pointer"
                     (click)="showTransactionRecord(item)"
                     *ngFor="let item of transactionList;">
                  <div class="row">
                    <div class="col-sm-6">
                      <i class="far fa-arrow-alt-circle-right mr-2 text-red"></i>
                      <span class="text-red">{{item.receiptNo}}</span>
                    </div>
                    <div class="col-sm-3"><span class="float-right">{{item.amount | currency:'₺'}}</span></div>
                    <div class="col-sm-3"><span class="float-right">{{item.insertDate | date: 'yyyy-MM-dd'}}</span>
                    </div>
                  </div>
                </div>
                <ng-template #elseBlock>
                  <div class="card bg-red text-white">
                    <div class="card-body">Görüntülenecek veri bulunamadı.</div>
                  </div>
                </ng-template>
              </div>
            </div>
            <ng-template #elseBlock>
              <div class="card bg-red text-white">
                <div class="card-body">Görüntülenecek veri bulunamadı.</div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='edit'">
    <div class="card">
      <div class="card-body">
        <form (ngSubmit)="btnSave_Click()" class="was-validated" #f="ngForm">
          <div class="row">
            <div class="col-sm-6">
              <div class="row form-inline">
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="customerName">Müşteri Adı</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="customerName" name="customerName" type="text"
                         [(ngModel)]="selectedCustomer.data.name" required>
                  <div class="invalid-feedback invalid-input-info">Lütfen alanı doldurunuz.</div>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="customerCode">Kod</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="customerCode" name="customerCode" type="text"
                         [disabled]="selectedCustomer.data.code != ''"
                         [(ngModel)]="selectedCustomer.data.code">
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="customerType">Müşteri Tipi</label>
                </div>
                <div class="col-sm-9">
                  <select class="form-control form-control-sm w-100" id="customerType" name="customerType"
                          [(ngModel)]="selectedCustomer.data.customerType">
                    <option value="customer">Müşteri</option>
                    <option value="supplier">Tedarikçi</option>
                    <option value="customer-supplier">Müşteri-Tedarikçi</option>
                  </select>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="isActive">Aktif Durumu</label>
                </div>
                <div class="col-sm-9">
                  <select class="form-control form-control-sm w-100" id="isActive" name="isActive"
                          [(ngModel)]="selectedCustomer.data.isActive">
                    <option [ngValue]="true">Aktif</option>
                    <option [ngValue]="false">Pasif</option>
                  </select>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="phone1">Telefon</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="phone1" name="phone1" type="text"
                         [(ngModel)]="selectedCustomer.data.phone1" required>
                  <div class="invalid-feedback invalid-input-info">Lütfen alanı doldurunuz.</div>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="phone2">Fax</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="phone2" name="phone2" type="text"
                         [(ngModel)]="selectedCustomer.data.phone2">
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="eMail">E-Mail</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="eMail" name="eMail" type="email"
                         [(ngModel)]="selectedCustomer.data.email">
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="owner">Yetkili Kişi</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="owner" name="owner" type="text"
                         [(ngModel)]="selectedCustomer.data.owner" required>
                  <div class="invalid-feedback invalid-input-info">Lütfen alanı doldurunuz.</div>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="executivePrimary">Temsilci</label>
                </div>
                <div class="col-sm-9">
                  <select class="form-control form-control-sm w-100" id="executivePrimary" name="executivePrimary"
                          [(ngModel)]="selectedCustomer.data.executivePrimary">
                    <option [value]="-1">Seçilmedi</option>
                    <option value={{item.primaryKey}} *ngFor="let item of executiveList$ | async; index as i;">{{item.longName}}</option>
                  </select>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="postCode">Posta Kodu</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="postCode" name="postCode" type="text"
                         [(ngModel)]="selectedCustomer.data.postCode">
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="address">Adres</label>
                </div>
                <div class="col-sm-9">
                      <textarea class="form-control form-control-sm w-100" id="address" name="address"
                                type="text" cols="40" rows="2"
                                [(ngModel)]="selectedCustomer.data.address"></textarea>
                </div>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="row form-inline">
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="accountPrimaryKey">Hesap</label>
                </div>
                <div class="col-sm-9">
                  <select class="form-control form-control-sm w-100" id="accountPrimaryKey" name="accountPrimaryKey"
                          [(ngModel)]="selectedCustomer.data.defaultAccountPrimaryKey">
                    <option value={{item.primaryKey}}
                            *ngFor="let item of accountList$ | async; index as i;">{{item.name}}</option>
                  </select>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="paymentTypeKey">Ödeme Tipi</label>
                </div>
                <div class="col-sm-9">
                  <select class="form-control form-control-sm w-100" id="paymentTypeKey" name="paymentTypeKey"
                          [(ngModel)]="selectedCustomer.data.paymentTypeKey">
                    <option value="-1">Seçilmedi</option>
                    <option value={{item.primaryKey}} *ngFor="let item of paymentList">{{item.custom1}}</option>
                  </select>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="termKey">Vade</label>
                </div>
                <div class="col-sm-9">
                  <select class="form-control form-control-sm w-100" id="termKey" name="termKey"
                          [(ngModel)]="selectedCustomer.data.termKey">
                    <option value="-1">Seçilmedi</option>
                    <option value={{item.primaryKey}} *ngFor="let item of termList">{{item.custom1}}</option>
                  </select>
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="taxOffice">Vergi Dairesi</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="taxOffice" name="taxOffice" type="text"
                         [(ngModel)]="selectedCustomer.data.taxOffice">
                </div>
                <div class="col-sm-3">
                  <label class="col-form-label float-left" for="taxNumber">Vergi Numarası</label>
                </div>
                <div class="col-sm-9">
                  <input class="form-control form-control-sm w-100" id="taxNumber" name="taxNumber" type="text"
                         [(ngModel)]="selectedCustomer.data.taxNumber">
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="card-footer">
        <div class="btn-action float-left" *ngIf="selectedCustomer.data.primaryKey!=undefined">
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text danger-icon-side">
                <i class="far fa-trash-alt" *ngIf="!onTransaction"></i>
                <i class="fa fa-spinner fa-spin" *ngIf="onTransaction"></i>
              </span>
            </div>
            <button type="button" class="btn btn-sm btn-danger form-control"
                    [disabled]="onTransaction"
                    (click)="btnRemove_Click()">Kaldır
            </button>
          </div>
        </div>
        <div class="btn-action float-right">
          <div class="input-group">
            <div class="input-group-prepend">
                  <span class="input-group-text success-icon-side">
                    <i class="fa fa-check" *ngIf="!onTransaction"></i>
                    <i class="fa fa-spinner fa-spin" *ngIf="onTransaction"></i>
                  </span>
            </div>
            <button type="button" class="btn btn-sm btn-success form-control"
                    [disabled]="onTransaction || !f.valid"
                    (click)="btnSave_Click()">Kaydet
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="openedPanel=='accountSummary'">
    <div class="card-body">
      <div *ngIf="transactionList != undefined; else elseBlock2">
        <div class="table-responsive work-area-11" *ngIf="transactionList.length > 0; else elseBlock">
          <table class="table table-bordered table-striped table-hover">
            <thead>
              <tr class="table-row-class">
              <th>Fiş Numarası</th>
              <th>İşlem Tipi</th>
              <th>Alt İşlem Tipi</th>
              <th>Tutar Tipi</th>
              <th><span class="float-right">Tutar</span></th>
              <th><span class="float-right">Tarih</span></th>
            </tr>
            </thead>
            <tbody>
              <tr class="table-row-class" *ngFor="let item of transactionList">
              <td>
                <img src='{{item.iconUrl}}' width="20px" class="mr-2" alt="">
                <span>{{item.data.receiptNo}}</span>
              </td>
              <td>{{item.transactionTypeTr}}</td>
              <td>{{item.subTransactionTypeTr}}</td>
              <td>{{item.amountTypeTr}}</td>
              <td><span class="float-right">{{item.data.amount | currency:'₺'}}</span></td>
              <td><span class="float-right">{{item.data.insertDate | date: 'yyyy-MM-dd'}}</span></td>
            </tr>
              <tr class="table-success table-row-class">
                <td colspan="4">Toplam</td>
                <td><span class="float-right">{{totalValues | currency:'₺'}}</span></td>
                <td></td>
              </tr>
            </tbody>
          </table>
        </div>
        <ng-template #elseBlock>
          <div class="card bg-red text-white">
            <div class="card-body">Görüntülenecek veri bulunamadı.</div>
          </div>
        </ng-template>
      </div>
      <ng-template #elseBlock2>
        <div class="loader"></div>
      </ng-template>
    </div>
  </div>
  <div *ngIf="openedPanel=='fileUpload'">
    <div class="card-body">
      <div class="list-group mb-2" *ngIf="filesList != undefined; else elseBlock">
        <div *ngIf="filesList.length > 0; else elseBlock2">
          <div class="list-group-item bg-success text-light main-list-item">
            <div class="row">
              <div class="col-sm-8">Dosya Adı</div>
              <div class="col-sm-2">Boyut</div>
              <div class="col-sm-2"><span class="float-right">Tarih</span></div>
            </div>
          </div>
          <div class="list-group-item list-group-item-action main-list-item cursor-pointer"
               *ngFor="let item of filesList; index as i;">
            <div class="row">
              <div class="col-sm-8">
                <a [href]="item.data.downloadURL" target="_blank" rel="noopener" class="mr-2">
                  <img [src]="item.fileIcon" width="24px">
                </a>
                {{item.data.fileName}}
              </div>
              <div class="col-sm-2">{{item?.data?.size/1024 | number:'1.2-2'}} KB</div>
              <div class="col-sm-2"><span class="float-right">{{item.data.insertDate | date: 'yyyy-MM-dd'}}</span></div>
            </div>
          </div>
        </div>
        <ng-template #elseBlock2>
          <div class="card bg-red text-white">
            <div class="card-body">Görüntülenecek veri bulunamadı.</div>
          </div>
        </ng-template>
      </div>
      <ng-template #elseBlock>
        <div class="loader"></div>
      </ng-template>
    </div>
  </div>
  <div *ngIf="openedPanel=='visit'">
    <div class="card-body">
      <div *ngIf="visitList != undefined; else elseBlock2">
        <div class="table-responsive work-area-11" *ngIf="visitList.length > 0; else elseBlock">
          <table class="table table-bordered table-striped table-hover">
            <thead>
            <tr class="table-row-class">
              <th>Personel</th>
              <th>Açıklama</th>
              <th><span class="float-right">Tarih</span></th>
            </tr>
            </thead>
            <tbody>
            <tr class="table-row-class" *ngFor="let item of visitList">
              <td>{{item.employeeName}}</td>
              <td>{{item.visit.description}}</td>
              <td><span class="float-right">{{item.visit.visitDate | date: 'yyyy-MM-dd'}}</span></td>
            </tr>
            </tbody>
          </table>
        </div>
        <ng-template #elseBlock>
          <div class="card bg-red text-white">
            <div class="card-body">Görüntülenecek veri bulunamadı.</div>
          </div>
        </ng-template>
      </div>
      <ng-template #elseBlock2>
        <div class="loader"></div>
      </ng-template>
    </div>
  </div>
  <div *ngIf="openedPanel=='target'">
    <div class="card-body">
      <div class="table-responsive work-area-11" *ngIf="targetList$ | async; let targetList; else elseBlock">
        <table class="table table-bordered table-striped table-hover">
          <thead>
          <tr class="table-row-class">
            <th>Müşteri</th>
            <th>Hedef Tipi</th>
            <th>Hedef</th>
            <th>Başlangıç Ayı</th>
            <th>Bitiş Ayı</th>
            <th>Yıl</th>
          </tr>
          </thead>
          <tbody>
          <tr class="table-row-class" *ngFor="let item of targetList">
            <td>
              <i class="far fa-arrow-alt-circle-right mr-2 text-red"></i>
              <span class="text-red font-weight-600 mr-1">{{item['returnData'].customer.data.code}}</span>
              <span class="font-weight-600">{{item['returnData'].customer.data.name}}</span>
            </td>
            <td>{{item['returnData'].typeTr}}</td>
            <td><span class="float-right">{{item['returnData'].data.amount | currency:'₺'}}</span></td>
            <td>{{item['returnData'].beginMonthTr}}</td>
            <td>{{item['returnData'].finishMonthTr}}</td>
            <td>{{item['returnData'].data.year}}</td>
          </tr>
          </tbody>
        </table>
      </div>
      <ng-template #elseBlock>
        <div class="card bg-red text-white">
          <div class="card-body">Görüntülenecek veri bulunamadı.</div>
        </div>
      </ng-template>
    </div>
  </div>
  <div *ngIf="openedPanel=='mail'">
    <div class="card-body">
      <div class="list-group mb-2" *ngIf="mailList$ | async; let visitList; else elseBlock">
        <div class="list-group-item bg-success text-light main-list-item">
          <div class="row">
            <div class="col-sm-2">Personel</div>
            <div class="col-sm-8">Başlık</div>
            <div class="col-sm-1">Durum</div>
            <div class="col-sm-1"><span class="float-right">Tarih</span></div>
          </div>
        </div>
        <div class="list-group-item list-group-item-action main-list-item"
             *ngFor="let item of visitList; index as i;">
          <div class="row">
            <div class="col-sm-2"><i
              class="far fa-arrow-alt-circle-right mr-2 text-success"></i>{{item['returnData'].employeeName}}</div>
            <div class="col-sm-8">{{item['returnData'].data.subject}}</div>
            <div class="col-sm-1">{{item['returnData'].isSendTr}}</div>
            <div class="col-sm-1">
              <span class="float-right">{{item['returnData'].data.insertDate | date: 'yyyy-MM-dd'}}</span>
            </div>
          </div>
        </div>
      </div>
      <ng-template #elseBlock>
        <div class="card bg-red text-white">
          <div class="card-body">Görüntülenecek veri bulunamadı.</div>
        </div>
      </ng-template>
    </div>
  </div>
  <div *ngIf="openedPanel=='delivery-address'">
    <div class="card-body">
      <div class="form-row">
        <div class="col-sm-7">
          <div class="card">
            <div class="card-header bg-gray-gradient">
              <h5 class="card-title float-left mr-2">Yeni Sevk Adresi</h5>
              <button class="btn btn-sm btn-round btn-outline-secondary float-left mr-2" title="Yeni Address"
                      (click)="btnNewDeliveryAddress_Click()"><i class="fa fa-plus"></i></button>
            </div>
            <div class="card-body">
              <form (ngSubmit)="btnSaveDeliveryAddress_Click()" class="was-validated" #v="ngForm">
                <div class="form-row">
                  <div class="col-sm-2">
                    <label class="col-form-label float-left" for="addressDel">Adres Adı</label>
                  </div>
                  <div class="col-sm-10">
                    <input class="form-control form-control-sm w-100" id="addressName" name="addressName" type="text"
                           [(ngModel)]="newDeliveryAddress.data.addressName" required>
                    <div class="invalid-feedback">Lütfen alanı doldurunuz.</div>
                  </div>
                  <div class="col-sm-2">
                    <label class="col-form-label float-left" for="addressDel">Adres</label>
                  </div>
                  <div class="col-sm-10">
                    <textarea class="form-control form-control-sm w-100" id="addressDel" name="addressDel" type="text" required
                              cols="40" rows="5" [(ngModel)]="newDeliveryAddress.data.address"></textarea>
                    <div class="invalid-feedback">Lütfen alanı doldurunuz.</div>
                  </div>
                </div>
              </form>
            </div>
            <div class="card-footer">
              <div class="btn-action float-left">
                <div class="input-group">
                  <div class="input-group-prepend">
                    <span class="input-group-text success-icon-side">
                      <i class="fa fa-check" *ngIf="!onTransaction"></i>
                      <i class="fa fa-spinner fa-spin" *ngIf="onTransaction"></i>
                    </span>
                  </div>
                  <button type="button" class="btn btn-sm btn-success form-control"
                          [disabled]="onTransaction"
                          (click)="btnSaveDeliveryAddress_Click()">Kaydet
                  </button>
                </div>
              </div>
              <div class="btn-action float-right" *ngIf="newDeliveryAddress.data.primaryKey!=undefined">
                <div class="input-group">
                  <div class="input-group-prepend">
          <span class="input-group-text danger-icon-side">
            <i class="far fa-trash-alt" *ngIf="!onTransaction"></i>
            <i class="fa fa-spinner fa-spin" *ngIf="onTransaction"></i>
          </span>
                  </div>
                  <button type="button" class="btn btn-sm btn-danger form-control"
                          [disabled]="onTransaction"
                          (click)="btnRemoveDeliveryAddress_Click()">Kaldır
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-sm-5">
          <div class="card">
            <div class="card-header bg-gray-gradient">
              <h6 class="card-title float-left mr-2">Adresler</h6>
            </div>
            <div class="card-body work-area-2">
              <div *ngIf="deliveryAddressList != undefined; else elseBlock2">
                <div class="list-group" *ngIf="deliveryAddressList.length > 0; else elseBlock">
                  <div class="list-group-item bg-danger text-light main-list-item">
                    <div class="row">
                      <div class="col-sm-12">Adres</div>
                    </div>
                  </div>
                  <div class="list-group-item list-group-item-action main-list-item cursor-pointer"
                       (click)="showSelectedDeliveryAddressRecord(item)"
                       *ngFor="let item of deliveryAddressList">
                    <div class="row">
                      <div class="col-sm-12">
                        <span class="text-red mr-2">{{item.data.addressName}}:</span>{{item.data.address}}
                      </div>
                    </div>
                  </div>
                </div>
                <ng-template #elseBlock>
                  <div class="card bg-red text-white">
                    <div class="card-body">Görüntülenecek veri bulunamadı.</div>
                  </div>
                </ng-template>
              </div>
              <ng-template #elseBlock2>
                <div class="loader"></div>
              </ng-template>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
